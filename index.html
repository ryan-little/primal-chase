<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Primal Chase</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- Skip link for keyboard navigation -->
  <a href="#screen-game" class="skip-link">Skip to game</a>

  <!-- Night background overlay (fades via opacity) -->
  <div class="night-bg"></div>

  <!-- Typewriter cinematic intro -->
  <div id="typewriter-overlay" class="typewriter-overlay">
    <div class="typewriter-content" id="typewriter-content"></div>
    <div class="typewriter-skip">Press SPACE or tap to skip</div>
  </div>

  <main>
  <!-- Title Screen -->
  <div id="screen-title" class="screen active">
    <div class="title-container">
      <img id="title-logo" src="assets/primalchaselogoout.png" alt="Primal Chase" class="logo">
      <div class="title-buttons">
        <button id="btn-start" class="title-btn title-btn-primary">Start the Hunt</button>
        <button id="btn-howto" class="title-btn">Learn to Run</button>
        <button id="btn-leaderboard" class="title-btn">The Longest Strides</button>
        <button id="btn-options" class="title-btn">Options</button>
      </div>
      <div class="creator-credit">A game by <a href="https://ryan-little.com" target="_blank" rel="noopener">Ryan Little</a></div>
    </div>
  </div>

  <!-- Game Screen -->
  <div id="screen-game" class="screen">
    <div class="game-container">
      <div class="game-header">
        <div id="phase-indicator" class="phase-indicator" role="status" aria-live="polite" aria-label="Current phase">DAY 1</div>
      </div>

      <div class="game-top">
        <div class="vitals-grid">
          <div class="status-bar-container" role="group" aria-labelledby="heat-label">
            <div id="heat-label" class="status-label">Heat</div>
            <div class="status-value" id="heat-value" aria-live="polite">0%</div>
            <div class="status-bar-track">
              <div id="heat-bar" class="status-bar-fill heat-bar" style="width: 0%"></div>
            </div>
          </div>

          <div class="status-bar-container" role="group" aria-labelledby="stamina-label">
            <div id="stamina-label" class="status-label">Stamina</div>
            <div class="status-value" id="stamina-value" aria-live="polite">100%</div>
            <div class="status-bar-track">
              <div id="stamina-bar" class="status-bar-fill stamina-bar" style="width: 100%"></div>
            </div>
          </div>

          <div class="status-bar-container" role="group" aria-labelledby="thirst-label">
            <div id="thirst-label" class="status-label">Thirst</div>
            <div class="status-value" id="thirst-value" aria-live="polite">0%</div>
            <div class="status-bar-track">
              <div id="thirst-bar" class="status-bar-fill thirst-bar" style="width: 0%"></div>
            </div>
          </div>

          <div class="status-bar-container" role="group" aria-labelledby="hunger-label">
            <div id="hunger-label" class="status-label">Hunger</div>
            <div class="status-value" id="hunger-value" aria-live="polite">0%</div>
            <div class="status-bar-track">
              <div id="hunger-bar" class="status-bar-fill hunger-bar" style="width: 0%"></div>
            </div>
          </div>
        </div>

        <div class="game-sidebar">
          <div id="hunt-info" class="hunt-info" aria-live="polite" aria-atomic="true">
            <div class="hunt-distance">Hunters are <span id="hunter-distance">25</span> miles behind</div>
            <div class="hunt-flavor" id="hunt-flavor">You can barely sense them. But they are there.</div>
            <div class="distance-covered">You have covered <span id="distance-covered">0</span> miles on the chase so far</div>
          </div>
        </div>
      </div>

      <div class="situation-scroll">
        <div id="situation-text" class="situation-text">
          <!-- Encounter description will be injected here -->
        </div>

        <div id="monologue" class="monologue">
          <!-- Internal monologue will be injected here -->
        </div>
      </div>

      <div id="action-buttons" class="action-buttons" role="region" aria-label="Available actions">
        <!-- Action buttons will be dynamically generated here -->
      </div>
    </div>
  </div>

  <!-- Death Screen -->
  <div id="screen-death" class="screen">
    <div class="death-container">
      <div id="death-narrative" class="death-narrative">
        <!-- Death narrative will be injected here -->
      </div>

      <div class="score-summary">
        <div class="score-stats">
          <div class="score-stat">Days Survived: <span id="score-days" class="score-number">0</span></div>
          <div class="score-stat">Distance: <span id="score-distance" class="score-number">0 mi</span></div>
        </div>

        <div id="percentile-stats" class="percentile-stats">
          <!-- Percentile comparisons injected here -->
        </div>

        <div id="achievements-list" class="achievements-list">
          <!-- Achievements will be injected here -->
        </div>
      </div>

      <div class="death-buttons">
        <button id="btn-try-again" class="death-btn primary">Try Again</button>
        <div class="death-buttons-row">
          <button id="btn-share-text" class="death-btn">Share Text</button>
          <button id="btn-share-image" class="death-btn">Share Image</button>
        </div>
        <button id="btn-return-title" class="death-btn">Return to Title</button>
      </div>
      <div class="feedback-link">Have an idea or found a bug? <a href="mailto:ryan@ryanpdlittle.com">Let me know!</a></div>
      <div class="creator-credit">Made by <a href="https://ryan-little.com" target="_blank" rel="noopener">Ryan Little</a></div>
    </div>
  </div>

  <!-- Leaderboard Screen -->
  <div id="screen-leaderboard" class="screen">
    <div class="leaderboard-container">
      <h1 class="leaderboard-title">The Longest Strides</h1>
      <div id="leaderboard-table" class="leaderboard-table">
        <table>
          <caption class="sr-only">Top player runs ranked by days survived</caption>
          <thead>
            <tr>
              <th scope="col">Rank</th>
              <th scope="col">Days</th>
              <th scope="col">Distance</th>
              <th scope="col">Lost Hunters</th>
              <th scope="col">Death</th>
            </tr>
          </thead>
          <tbody id="leaderboard-body">
            <!-- Leaderboard entries will be injected here -->
          </tbody>
        </table>
      </div>
      <button id="btn-leaderboard-back" class="back-btn">Return to Title</button>
    </div>
  </div>

  <!-- How to Play Screen -->
  <div id="screen-howto" class="screen">
    <div class="howto-container">
      <h1>Learn to Run</h1>
      <div class="howto-content">
        <p class="howto-intro">You are an apex predator — a big cat built for explosive speed. But the humans hunting you don't play by your rules. They track. They follow. They never stop. This is persistence hunting, and you cannot win. You can only survive one more day.</p>

        <div class="howto-columns">
          <section>
            <h2>THE CYCLE</h2>
            <p>Each day has two phases: <strong class="day-text">DAY</strong> and <strong class="night-text">NIGHT</strong>. One action per phase. Days are brutal — heat builds, thirst climbs, everything costs more — but you cover the most ground. Nights are merciful — heat fades, thirst slows, and the hunters make camp. Use darkness to recover.</p>
          </section>

          <section>
            <h2>YOUR VITALS</h2>
            <ul>
              <li><strong>Heat</strong> — Builds when you run. Heatstroke kills. Rest to cool.</li>
              <li><strong>Stamina</strong> — Your energy. Exhaustion kills. Rest to recover.</li>
              <li><strong>Thirst</strong> — Rises every phase. Find water or dehydrate.</li>
              <li><strong>Hunger</strong> — Rises slowly. Scavenge when you can.</li>
            </ul>
          </section>

          <section>
            <h2>YOUR ACTIONS</h2>
            <ul>
              <li><strong>Push</strong> — Sprint. Maximum distance, maximum cost.</li>
              <li><strong>Trot</strong> — Sustainable pace. Moderate everything.</li>
              <li><strong>Rest</strong> — Recover heat and stamina, but hunters close in. The situation stays the same — Trot to find new opportunities.</li>
              <li><strong>Drink / Eat</strong> — Appear when the land offers them. Cost time.</li>
            </ul>
            <p>Buttons show <strong>total real effects</strong> including passive drains.</p>
          </section>

          <section>
            <h2>THE LAND</h2>
            <p>Each phase brings new terrain with unique opportunities — water, food, ways to lose the hunters. Rare encounters can change everything. Resting keeps the same situation; you must move to find new ground.</p>
          </section>

          <section>
            <h2>THE HUNTERS</h2>
            <p>They start 25 miles back, moving at a steady pace that never stops. Lose them through encounters, but each time they find your trail again, they come back faster. The gap is everything.</p>
          </section>

          <section class="howto-achievements">
            <h2>ACHIEVEMENTS</h2>
            <ul>
              <li><strong>Week of Running</strong> — 7 days</li>
              <li><strong>Into the Unknown</strong> — 10 days</li>
              <li><strong>The Long Road</strong> — 15 days</li>
              <li><strong>Legend</strong> — 20 days</li>
              <li><strong>Myth</strong> — 30 days</li>
              <li><strong>Distance Master / Long Strider / Century Runner</strong> — 50 / 75 / 100+ miles</li>
              <li><strong>Shadow Walker / Ghost</strong> — Lose the hunters 3 / 5+ times</li>
              <li><strong>Night Runner</strong> — Push through darkness 3+ times</li>
              <li><strong>Iron Will</strong> — Never rest (3+ days)</li>
              <li><strong>Desert Crosser</strong> — Survive extreme thirst</li>
              <li><strong>On the Edge</strong> — Dance with death repeatedly</li>
              <li><strong>Perfect Balance</strong> — Master the chase (5+ days)</li>
              <li><strong>Too Fast, Too Soon</strong> — Die on Day 1</li>
            </ul>
          </section>
        </div>
      </div>
      <button id="btn-howto-back" class="back-btn">Return to Title</button>
    </div>
  </div>

  <!-- Options Screen -->
  <div id="screen-options" class="screen">
    <div class="options-container">
      <h1>Options</h1>
      <div class="options-content">
        <div class="option-row">
          <div class="option-label-group">
            <span class="option-label">Difficulty</span>
            <span class="option-help">Adjusts hunter speed and passive drain rates</span>
          </div>
          <div class="option-control difficulty-control">
            <button class="option-btn" data-option="difficulty" data-value="easy">Easy</button>
            <button class="option-btn active" data-option="difficulty" data-value="normal">Normal</button>
            <button class="option-btn" data-option="difficulty" data-value="hard">Hard</button>
          </div>
        </div>
        <div class="option-row">
          <div class="option-label-group">
            <span class="option-label">Show Tutorial</span>
            <span class="option-help">Display tutorial encounters on Day 1</span>
          </div>
          <div class="option-control">
            <button class="option-toggle active" id="opt-tutorial" data-option="showTutorial">ON</button>
          </div>
        </div>
        <div class="option-row">
          <div class="option-label-group">
            <span class="option-label">Show Opening</span>
            <span class="option-help">Play cinematic intro before starting</span>
          </div>
          <div class="option-control">
            <button class="option-toggle active" id="opt-opening" data-option="showOpening">ON</button>
          </div>
        </div>
        <div class="option-row">
          <div class="option-label-group">
            <span class="option-label">Typewriter Effect</span>
            <span class="option-help">Animate text character-by-character for cinematic opening</span>
          </div>
          <div class="option-control">
            <button class="option-toggle active" id="opt-typewriter" data-option="typewriterEffect">ON</button>
          </div>
        </div>
        <div class="option-row speed-row" id="typewriter-speed-inline">
          <span class="option-label">Speed</span>
          <div class="option-control speed-control">
            <span class="slider-label">Fast</span>
            <input type="range" id="opt-typewriter-speed" class="option-slider" min="5" max="50" value="30">
            <span class="slider-label">Slow</span>
          </div>
        </div>
        <div class="option-row" id="opt-situation-row">
          <div class="option-label-group">
            <span class="option-label">Situation Typewriter</span>
            <span class="option-help">Animate encounter text during gameplay (slower pace)</span>
          </div>
          <div class="option-control">
            <button class="option-toggle active" id="opt-situation-typewriter" data-option="situationTypewriter">ON</button>
          </div>
        </div>
      </div>
      <button id="btn-options-back" class="back-btn">Return to Title</button>
    </div>
  </div>
  </main>

  <!-- Version badge (visible on all screens) -->
  <div id="version-badge">v1.8.0</div>

  <!-- Hidden canvas for share image generation -->
  <canvas id="share-canvas" style="display: none;"></canvas>

  <!-- Scripts loaded in dependency order -->
  <script src="js/config.js"></script>
  <script src="js/encounters.js"></script>
  <script src="js/monologue.js"></script>
  <script src="js/hunters.js"></script>
  <script src="js/game.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/score.js"></script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Primal Chase</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- Night background overlay (fades via opacity) -->
  <div class="night-bg"></div>

  <!-- Typewriter cinematic intro -->
  <div id="typewriter-overlay" class="typewriter-overlay">
    <div class="typewriter-content" id="typewriter-content"></div>
    <div class="typewriter-skip">Press SPACE or tap to skip</div>
  </div>

  <!-- Title Screen -->
  <div id="screen-title" class="screen active">
    <div class="title-container">
      <img id="title-logo" src="assets/primalchaselogoout.png" alt="Primal Chase" class="logo">
      <div class="title-buttons">
        <button id="btn-start" class="title-btn title-btn-primary">Start the Hunt</button>
        <button id="btn-howto" class="title-btn">Learn to Run</button>
        <button id="btn-leaderboard" class="title-btn">The Longest Strides</button>
        <button id="btn-options" class="title-btn">Options</button>
      </div>
      <div class="creator-credit">A game by <a href="https://ryan-little.com" target="_blank" rel="noopener">Ryan Little</a></div>
    </div>
  </div>

  <!-- Game Screen -->
  <div id="screen-game" class="screen">
    <div class="game-container">
      <div class="game-header">
        <div id="phase-indicator" class="phase-indicator">DAY 1</div>
      </div>

      <div class="game-top">
        <div class="vitals-grid">
          <div class="status-bar-container">
            <div class="status-label">Heat</div>
            <div class="status-value" id="heat-value">0%</div>
            <div class="status-bar-track">
              <div id="heat-bar" class="status-bar-fill heat-bar" style="width: 0%"></div>
            </div>
          </div>

          <div class="status-bar-container">
            <div class="status-label">Stamina</div>
            <div class="status-value" id="stamina-value">100%</div>
            <div class="status-bar-track">
              <div id="stamina-bar" class="status-bar-fill stamina-bar" style="width: 100%"></div>
            </div>
          </div>

          <div class="status-bar-container">
            <div class="status-label">Thirst</div>
            <div class="status-value" id="thirst-value">0%</div>
            <div class="status-bar-track">
              <div id="thirst-bar" class="status-bar-fill thirst-bar" style="width: 0%"></div>
            </div>
          </div>

          <div class="status-bar-container">
            <div class="status-label">Hunger</div>
            <div class="status-value" id="hunger-value">0%</div>
            <div class="status-bar-track">
              <div id="hunger-bar" class="status-bar-fill hunger-bar" style="width: 0%"></div>
            </div>
          </div>
        </div>

        <div class="game-sidebar">
          <div id="hunt-info" class="hunt-info">
            <div class="hunt-distance">Hunters are <span id="hunter-distance">25</span> miles behind</div>
            <div class="hunt-flavor" id="hunt-flavor">You can barely sense them. But they are there.</div>
            <div class="distance-covered">You have covered <span id="distance-covered">0</span> miles on the chase so far</div>
          </div>
        </div>
      </div>

      <div class="situation-scroll">
        <div id="situation-text" class="situation-text">
          <!-- Encounter description will be injected here -->
        </div>

        <div id="monologue" class="monologue">
          <!-- Internal monologue will be injected here -->
        </div>
      </div>

      <div id="action-buttons" class="action-buttons">
        <!-- Action buttons will be dynamically generated here -->
      </div>
    </div>
  </div>

  <!-- Death Screen -->
  <div id="screen-death" class="screen">
    <div class="death-container">
      <div id="death-narrative" class="death-narrative">
        <!-- Death narrative will be injected here -->
      </div>

      <div class="score-summary">
        <div class="score-stats">
          <div class="score-stat">Days Survived: <span id="score-days" class="score-number">0</span></div>
          <div class="score-stat">Distance: <span id="score-distance" class="score-number">0 mi</span></div>
        </div>

        <div id="percentile-stats" class="percentile-stats">
          <!-- Percentile comparisons injected here -->
        </div>

        <div id="achievements-list" class="achievements-list">
          <!-- Achievements will be injected here -->
        </div>
      </div>

      <div class="death-buttons">
        <button id="btn-try-again" class="death-btn primary">Try Again</button>
        <div class="death-buttons-row">
          <button id="btn-share-text" class="death-btn">Share Text</button>
          <button id="btn-share-image" class="death-btn">Share Image</button>
        </div>
        <button id="btn-submit-score" class="death-btn">Submit to Longest Strides</button>
        <button id="btn-return-title" class="death-btn">Return to Title</button>
      </div>
      <div class="creator-credit">Made by <a href="https://ryan-little.com" target="_blank" rel="noopener">Ryan Little</a></div>
    </div>
  </div>

  <!-- Leaderboard Screen -->
  <div id="screen-leaderboard" class="screen">
    <div class="leaderboard-container">
      <h1 class="leaderboard-title">The Longest Strides</h1>
      <div id="leaderboard-table" class="leaderboard-table">
        <table>
          <thead>
            <tr>
              <th>Rank</th>
              <th>Days</th>
              <th>Distance</th>
              <th>Lost Hunters</th>
              <th>Death</th>
            </tr>
          </thead>
          <tbody id="leaderboard-body">
            <!-- Leaderboard entries will be injected here -->
          </tbody>
        </table>
      </div>
      <button id="btn-leaderboard-back" class="back-btn">Return to Title</button>
    </div>
  </div>

  <!-- How to Play Screen -->
  <div id="screen-howto" class="screen">
    <div class="howto-container">
      <h1>Learn to Run</h1>
      <div class="howto-content">
        <p class="howto-intro">You are an apex predator — a big cat built for explosive speed. But the humans hunting you don't play by your rules. They track. They follow. They never stop. This is persistence hunting, and you cannot win. You can only survive one more day.</p>

        <div class="howto-columns">
          <section>
            <h2>THE DAY</h2>
            <p>Each day is split into two phases: <strong class="day-text">DAY</strong> and <strong class="night-text">NIGHT</strong>. You choose one action per phase. During the day, the sun is brutal — heat builds fast, thirst climbs, and every move costs more. But you cover the most ground in daylight.</p>
          </section>

          <section>
            <h2>THE NIGHT</h2>
            <p>At night, heat is no longer a threat and thirst rises more slowly. You move less distance, but the hunters make camp — they barely gain ground. Use the darkness to rest, recover, and prepare for the next day.</p>
          </section>

          <section>
            <h2>YOUR VITALS</h2>
            <ul>
              <li><strong>Heat</strong> — Builds when you run under the sun. Too much and you collapse from heatstroke. Rest to cool down.</li>
              <li><strong>Stamina</strong> — Your energy reserves. Push too hard without resting and exhaustion will claim you.</li>
              <li><strong>Thirst</strong> — Rises every phase. Find water when you can, or dehydration will kill you before the hunters do.</li>
              <li><strong>Hunger</strong> — Rises slowly but relentlessly. Scavenge when you can, or starve.</li>
            </ul>
          </section>

          <section>
            <h2>YOUR ACTIONS</h2>
            <ul>
              <li><strong>Push</strong> — Sprint at full speed. Covers the most ground, but drains stamina and builds dangerous heat.</li>
              <li><strong>Trot</strong> — A sustainable pace. Moderate distance, moderate costs.</li>
              <li><strong>Rest</strong> — Stop moving. Recover heat and stamina, but the hunters close in. Since you haven't moved, the situation stays the same — you must at least Trot to find new opportunities.</li>
              <li><strong>Drink / Eat</strong> — Appear when the land offers water or food. Reset thirst or hunger, but cost precious time.</li>
            </ul>
            <p>Action buttons show the <strong>total real effect</strong> on your stats — including passive drains — so what you see is what happens.</p>
          </section>

          <section>
            <h2>THE SITUATIONS</h2>
            <p>Each phase, the terrain shifts around you. Fever trees, dry riverbeds, rocky escarpments — every location is different, and some offer unique opportunities: a hidden water source, a scavenging chance, or a way to throw the hunters off your trail. Rare encounters can change the course of a run entirely. If you Rest, you stay in the same situation — you must at least Trot to find new terrain and new opportunities.</p>
          </section>

          <section>
            <h2>THE HUNTERS</h2>
            <p>They start 25 miles behind, moving at a steady pace. Some encounters let you lose them temporarily — but every time they pick up your trail again, they come back faster. Water sources can give them a boost if they find where you drank. The gap between you and them is the only thing keeping you alive.</p>
          </section>

          <section class="howto-achievements">
            <h2>ACHIEVEMENTS</h2>
            <ul>
              <li><strong>Week of Running</strong> — Survive 7 days</li>
              <li><strong>Into the Unknown</strong> — Survive 10 days</li>
              <li><strong>The Long Road</strong> — Survive 15 days</li>
              <li><strong>Legend</strong> — Survive 20 days</li>
              <li><strong>Myth</strong> — Survive 30 days</li>
              <li><strong>Distance Master</strong> — Cover 50+ miles</li>
              <li><strong>Long Strider</strong> — Cover 75+ miles</li>
              <li><strong>Century Runner</strong> — Cover 100+ miles</li>
            </ul>
          </section>

          <section class="howto-achievements">
            <h2>&nbsp;</h2>
            <ul>
              <li><strong>Shadow Walker</strong> — Lose the hunters 3+ times</li>
              <li><strong>Ghost</strong> — Lose the hunters 5+ times</li>
              <li><strong>Night Runner</strong> — Push through darkness 3+ times</li>
              <li><strong>Iron Will</strong> — Never rest (survive 3+ days)</li>
              <li><strong>Desert Crosser</strong> — Survive extreme thirst</li>
              <li><strong>On the Edge</strong> — Dance with death repeatedly</li>
              <li><strong>Perfect Balance</strong> — Master the chase (5+ days)</li>
              <li><strong>Too Fast, Too Soon</strong> — Die on Day 1</li>
            </ul>
          </section>
        </div>
      </div>
      <button id="btn-howto-back" class="back-btn">Return to Title</button>
    </div>
  </div>

  <!-- Options Screen -->
  <div id="screen-options" class="screen">
    <div class="options-container">
      <h1>Options</h1>
      <div class="options-content">
        <div class="option-row">
          <span class="option-label">Difficulty</span>
          <div class="option-control difficulty-control">
            <button class="option-btn disabled" data-option="difficulty" data-value="easy" disabled>Easy</button>
            <button class="option-btn active" data-option="difficulty" data-value="normal">Normal</button>
            <button class="option-btn disabled" data-option="difficulty" data-value="hard" disabled>Hard</button>
          </div>
        </div>
        <div class="option-row">
          <span class="option-label">Show Opening</span>
          <div class="option-control">
            <button class="option-toggle active" id="opt-opening" data-option="showOpening">ON</button>
          </div>
        </div>
        <div class="option-row">
          <span class="option-label">Typewriter Effect</span>
          <div class="option-control">
            <button class="option-toggle active" id="opt-typewriter" data-option="typewriterEffect">ON</button>
          </div>
        </div>
        <div class="option-row speed-row" id="typewriter-speed-inline">
          <span class="option-label">Speed</span>
          <div class="option-control speed-control">
            <span class="slider-label">Fast</span>
            <input type="range" id="opt-typewriter-speed" class="option-slider" min="5" max="50" value="30">
            <span class="slider-label">Slow</span>
          </div>
        </div>
        <div class="option-row" id="opt-situation-row">
          <span class="option-label">Situation Typewriter</span>
          <div class="option-control">
            <button class="option-toggle active" id="opt-situation-typewriter" data-option="situationTypewriter">ON</button>
          </div>
        </div>
      </div>
      <button id="btn-options-back" class="back-btn">Return to Title</button>
    </div>
  </div>

  <!-- Hidden canvas for share image generation -->
  <canvas id="share-canvas" style="display: none;"></canvas>

  <!-- Scripts loaded in dependency order -->
  <script src="js/config.js"></script>
  <script src="js/encounters.js"></script>
  <script src="js/monologue.js"></script>
  <script src="js/hunters.js"></script>
  <script src="js/game.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/score.js"></script>

</body>
</html>
